/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package GUI;

import BUS.KhachHangBUS;
import BUS.NhanVienBUS;
import BUS.PhieuXuatBUS;
import DTO.KhachHangDTO;
import DTO.NhanVienDTO;
import DTO.PhieuNhapDTO;
import DTO.PhieuXuatDTO;
import java.text.DecimalFormat;
import java.util.ArrayList;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JLabel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumnModel;

/**
 *
 * @author ACER
 */
public class PhieuXuatGUI extends PhieuNhapGUI {
    
    private PhieuXuatBUS PXBUS = new PhieuXuatBUS();
    private NhanVienBUS NVBUS = new NhanVienBUS();
    private KhachHangBUS KHBUS = new KhachHangBUS();
    private ArrayList<PhieuXuatDTO> listPX = PXBUS.getAll();
    private ArrayList<KhachHangDTO> listKH = KHBUS.getAllKhachHang();
    private ArrayList<NhanVienDTO> listNV = NVBUS.getAllNhanVien();
    
    
    public PhieuXuatGUI() {
        super();
        labelNCC.setText("Khách hàng");
        labelNV.setText("Nhân viên xuất");
        tblDSPN.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "STT", "Mã phiếu", "Khách hàng", "Nhân viên", "Thời gian", "Tổng tiền (VNĐ)"
            }));
        
//        DefaultTableCellRenderer centerRenderer = new DefaultTableCellRenderer();
//        centerRenderer.setHorizontalAlignment(JLabel.CENTER);
//        TableColumnModel columnModel = tblDSPN.getColumnModel();
//        columnModel.getColumn(0).setPreferredWidth(50);
//        columnModel.getColumn(0).setCellRenderer(centerRenderer);
//        columnModel.getColumn(1).setPreferredWidth(100);
//        columnModel.getColumn(1).setCellRenderer(centerRenderer);
//        columnModel.getColumn(2).setPreferredWidth(400);
//        columnModel.getColumn(3).setPreferredWidth(200);
//        columnModel.getColumn(4).setPreferredWidth(200);
//        columnModel.getColumn(5).setPreferredWidth(200);
    }
    
    @Override
    public void loadData(ArrayList<PhieuNhapDTO> listPN) {
        int i = 1;
        DefaultTableModel tblModel = (DefaultTableModel) tblDSPN.getModel();
        while (tblModel.getRowCount() > 0) {
            tblModel.removeRow(0);
        }
        DecimalFormat decimalFormat = new DecimalFormat("#,###");
        for (PhieuXuatDTO x : listPX) {
            tblModel.addRow(new Object[] {i++,x.getMaPhieu(),KHBUS.getByIndex(KHBUS.getByID(x.getMKH())),NVBUS.getByIndex(NVBUS.getByID(x.getMNV())).getHoTen(),x.getThoiGian(),decimalFormat.format(x.getTongTien())});
        }
        tblDSPN.setModel(tblModel);
    }

    @Override
    public void loadCbbFilter() {
        toolBar.getCbbFilter().setModel(new DefaultComboBoxModel(new String[]{
            "Tất cả","Mã phiếu","Tên khách hàng","Tên nhân viên"
        }));
    }

    public void loadCbbKhachHang() {
        for (KhachHangDTO x : listKH) {
            cbbNVN.addItem(x.getTenKhachHang());
        }
    }

    @Override
    public void loadCbbNhanVien() {
        super.loadCbbNhanVien();
    }

    @Override
    public void setEvent() {
        super.setEvent();
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 963, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 724, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    
    
    
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables
}
